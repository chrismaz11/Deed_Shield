# DB Security Evidence Bundle

- Generated: 2026-02-22T15:09:15Z
- Environment Target: staging-local
- Output Path: `docs/evidence/db-security/staging-local-20260222T150912Z.md`

## Repository Baseline
- Prisma datasource provider: `postgresql`
- Migration lock provider: `postgresql`
- Baseline migration present: `YES` (`apps/api/prisma/migrations/20260222141500_postgresql_baseline/migration.sql`)
- Provider check: `PASS`

## DATABASE_URL Policy Check
- DATABASE_URL present: `YES`
- Redacted URL: `postgresql://christopher@localhost:5432/deed_shield?sslmode=disable`
- Protocol: `postgresql:`
- Host: `localhost:5432`
- Database: `deed_shield`
- sslmode: `disable`
- Protocol policy (`postgresql://` or `postgres://`): `PASS`
- TLS policy (`sslmode=require|verify-ca|verify-full`): `FAIL`

## Prisma Migration Status
- Command: `npx prisma migrate status --schema apps/api/prisma/schema.prisma`
```text
Prisma schema loaded from apps/api/prisma/schema.prisma
Datasource "db": PostgreSQL database "deed_shield", schema "public" at "localhost:5432"

1 migration found in prisma/migrations

Database schema is up to date!

```
- Result: `PASS`

## PostgreSQL TLS Session Evidence
- Database + User: `PASS`
```text
deed_shield|christopher
```
- Server SSL Capability: `FAIL`
```text
off
```
- Server Minimum SSL Protocol: `PASS`
```text
TLSv1.2
```
- Current Session TLS: `FAIL`
```text
f||
```

## AWS/RDS Evidence
- aws cli: `available`
```text
aws-cli/2.33.15 Python/3.13.12 Darwin/25.3.0 source/arm64
```
- sts identity check: `FAIL`
```text
An error occurred (InvalidClientTokenId) when calling the GetCallerIdentity operation: The security token included in the request is invalid.
```
- db instance request (not requested): `SKIPPED/FAIL`
```text
Not requested (no --db-instance-id provided).
```
- db cluster request (not requested): `SKIPPED/FAIL`
```text
Not requested (no --db-cluster-id provided).
```

## Summary
- Automated checks ready status: `NEEDS FOLLOW-UP`
- To close Workstream #3 in staging/prod, include this file plus provider screenshots/console evidence of storage encryption and CA/TLS policy.
